<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>VinceVision â€” Premium Tech Solutions</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  /* -------------------------
     Reset and variables
     ------------------------- */
  :root{
    --bg:#05060a;
    --muted:#9aa0a6;
    --gold:#D4AF37;
    --glass: rgba(255,255,255,0.03);
    --accent-fut:#21b6ff;
    --accent-cine:#ff4d6d;
    --radius:14px;
    --transition: cubic-bezier(.2,.9,.3,1);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;font-family:Inter, 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
  body{background:var(--bg);color:#fff;overflow-x:hidden;line-height:1.45}
  a{color:inherit;text-decoration:none}
  button{font:inherit;cursor:pointer}
  img{max-width:100%;display:block}

  /* -------------------------
     header
     ------------------------- */
  header{
    position:fixed;left:0;right:0;top:0;height:76px;padding:0 5%;
    display:flex;align-items:center;justify-content:space-between;z-index:120;
    background:linear-gradient(180deg, rgba(2,2,8,0.65), rgba(2,2,8,0.35));
    backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,0.03)
  }
  .logo{display:flex;align-items:center;gap:.6rem;font-weight:700;font-size:1.25rem}
  .logo i{color:var(--gold)}
  nav{display:flex;gap:1rem;align-items:center}
  nav a{color:rgba(255,255,255,0.95);padding:.25rem .35rem;border-radius:8px}
  nav a:hover{color:var(--gold)}
  .header-right{display:flex;align-items:center;gap:.75rem}
  #local-time{font-size:.88rem;padding:.45rem .75rem;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.02)}
  #theme-toggle{padding:.45rem .65rem;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.04)}
  .audio-toggle{padding:.45rem;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.04)}

  /* -------------------------
     overlays
     ------------------------- */
  .overlay{
    position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
    z-index:300;backdrop-filter:blur(6px);background:linear-gradient(180deg, rgba(0,0,0,0.74), rgba(6,6,8,0.92));
    transition:opacity .35s var(--transition),visibility .35s var(--transition);
    opacity:1;visibility:visible;
  }
  .overlay.hidden{opacity:0;visibility:hidden;pointer-events:none}

  /* maintenance card */
  .maint-card{
    width:100%;max-width:980px;border-radius:14px;padding:1.6rem;background:linear-gradient(180deg, rgba(12,12,12,0.98), rgba(6,6,6,0.96));
    border:1px solid rgba(255,255,255,0.03);box-shadow:0 30px 90px rgba(0,0,0,0.6);text-align:center;
    transform-origin:center center;
    animation:maintPulse 2s ease infinite;
  }
  @keyframes maintPulse{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}

  .maint-title{font-size:1.5rem;font-weight:700}
  .maint-sub{color:var(--muted);margin-top:.4rem}
  .count-grid{display:flex;gap:.9rem;justify-content:center;margin-top:1rem;flex-wrap:wrap}
  .count-item{background:rgba(255,255,255,0.02);padding:.9rem 1.1rem;border-radius:10px;min-width:110px;border:1px solid rgba(255,255,255,0.02)}
  .count-big{font-weight:800;font-size:1.25rem}
  .controls{display:flex;gap:.6rem;justify-content:center;margin-top:1rem}

  /* shutdown visual */
  .shutdown-glitch{font-weight:800;font-size:2rem;color:#ff6b6b;text-transform:uppercase;letter-spacing:.06em}
  .glitch-anim{position:relative;display:inline-block}
  .glitch-anim::before,.glitch-anim::after{content:attr(data-text);position:absolute;left:0;top:0;transform-origin:left;}
  .glitch-anim::before{color:#fff;clip-path:inset(0 0 60% 0);opacity:0.8;transform:translate(-2px,-2px)}
  .glitch-anim::after{color:#fff;clip-path:inset(60% 0 0 0);opacity:0.6;transform:translate(2px,2px)}

  /* -------------------------
     chooser
     ------------------------- */
  .chooser{
    width:100%;max-width:1100px;border-radius:18px;padding:2rem;display:grid;grid-template-columns:1fr 1fr;gap:1.25rem;align-items:stretch;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.04);box-shadow:0 30px 80px rgba(0,0,0,0.6)
  }
  .intro{padding:1.25rem;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));display:flex;flex-direction:column;gap:.75rem;justify-content:center}
  .title{font-size:1.6rem;font-weight:700}
  .subtitle{color:var(--muted);font-size:.95rem}

  .modes{display:flex;flex-direction:column;gap:1rem;height:100%}
  .mode-card{flex:1;display:flex;flex-direction:column;gap:.8rem;padding:1rem;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.03);cursor:pointer;transition:transform .25s var(--transition),box-shadow .25s var(--transition);overflow:hidden}
  .mode-card:hover{transform:translateY(-8px);box-shadow:0 20px 60px rgba(0,0,0,0.5)}
  .mode-head{display:flex;align-items:center;gap:.6rem;font-weight:700}
  .mode-desc{color:var(--muted);font-size:.92rem}
  .mode-preview{height:96px;border-radius:10px;overflow:hidden;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;justify-content:center}
  .mode-cta{margin-top:auto;display:flex;gap:.6rem;align-items:center;justify-content:space-between}
  .btn{padding:.6rem .9rem;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff;font-weight:600;cursor:pointer}
  .btn.primary{background:var(--gold);color:#000;border-color:transparent}

  /* -------------------------
     themes: variables and layers
     ------------------------- */
  body.theme-futuristic{--accent:var(--accent-fut);background:linear-gradient(180deg,#030313,#061026 45%,#02141f)}
  body.theme-futuristic .logo i{color:var(--accent)}
  body.theme-futuristic .glass-card{background:linear-gradient(135deg, rgba(33,182,255,0.05), rgba(33,182,255,0.02));border:1px solid rgba(33,182,255,0.12)}

  body.theme-cinematic{--accent:var(--accent-cine);background:linear-gradient(180deg,#04040a,#080813 50%,#04040b)}
  body.theme-cinematic .logo i{color:var(--accent)}
  body.theme-cinematic .glass-card{background:linear-gradient(135deg, rgba(255,77,109,0.03), rgba(255,77,109,0.01));border:1px solid rgba(255,77,109,0.06)}

  /* -------------------------
     main content
     ------------------------- */
  main{padding-top:96px}
  #home{height:86vh;display:flex;align-items:center;justify-content:center;padding:2rem 5%;position:relative;overflow:hidden}
  .hero{max-width:1200px;width:100%;display:flex;gap:2rem;align-items:center;justify-content:space-between}
  .hero-left{flex:1;min-width:320px}
  .hero-right{flex:1;min-width:320px;display:flex;align-items:center;justify-content:center}
  .hero h1{font-size:2.8rem;margin-bottom:.25rem}
  .hero p{color:var(--muted);margin-top:.8rem;font-size:1.05rem}
  .glass-card{padding:1.1rem;border-radius:12px;background:var(--glass);border:1px solid rgba(255,255,255,0.03)}

  /* hero video background */
  .hero-video{position:absolute;inset:0;z-index:0;opacity:.72;pointer-events:none}
  .hero-video video{width:100%;height:100%;object-fit:cover}

  /* particles and streaks layers */
  #particles{position:fixed;right:0;bottom:0;left:0;top:0;z-index:0;pointer-events:none;opacity:0.92}
  .streak-wrap{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:0.9}

  /* services */
  .services-wrap{padding:2rem 5%}
  .services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.1rem;margin-top:1.4rem}
  .service-card{padding:1.1rem;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);transition:transform .28s var(--transition),box-shadow .28s var(--transition)}
  .service-card:hover{transform:translateY(-8px);box-shadow:0 22px 50px rgba(0,0,0,0.45)}
  .service-card h2{font-size:1.05rem;margin-bottom:.6rem;color:var(--gold)}
  .service-card p{color:var(--muted);font-size:.95rem}

  /* page transition */
  .section{opacity:0;transform:translateY(8px);transition:all .6s var(--transition)}
  .section.in-view{opacity:1;transform:translateY(0)}

  footer{padding:2rem 5%;text-align:center;color:var(--muted);border-top:1px solid rgba(255,255,255,0.02);margin-top:2rem}

  /* responsive */
  @media (max-width:920px){
    .chooser{grid-template-columns:1fr;padding:1rem}
    .hero{flex-direction:column;gap:1.2rem}
    header{padding:0 .6rem}
  }
</style>
</head>
<body>
  <!-- Maintenance overlay -->
  <div id="maintenanceOverlay" class="overlay" role="dialog" aria-modal="true" aria-label="Maintenance notice" style="display:none">
    <div class="maint-card" role="status" aria-live="polite">
      <div style="display:flex;align-items:center;gap:.9rem;justify-content:center;margin-bottom:.6rem">
        <div style="width:64px;height:64px;border-radius:50%;display:grid;place-items:center;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)">
          <i class="fas fa-exclamation-triangle" style="color:#ff8b8b;font-size:1.2rem"></i>
        </div>
        <div style="text-align:left">
          <div class="maint-title">System Offline, performing maintenance</div>
          <div class="maint-sub">Scheduled return: <strong>03:00 AM, October 25, 2025</strong>, Nairobi time</div>
        </div>
      </div>

      <div style="margin-top:.35rem">
        <div class="shutdown-glitch"><span class="glitch-anim" data-text="Shutdown in progress">Shutdown in progress</span></div>
      </div>

      <div class="count-grid" style="margin-top:1rem">
        <div class="count-item"><div class="count-big" id="mdays">0</div><div style="font-size:.9rem;color:var(--muted)">days</div></div>
        <div class="count-item"><div class="count-big" id="mhours">00</div><div style="font-size:.9rem;color:var(--muted)">hours</div></div>
        <div class="count-item"><div class="count-big" id="mmins">00</div><div style="font-size:.9rem;color:var(--muted)">minutes</div></div>
        <div class="count-item"><div class="count-big" id="msecs">00</div><div style="font-size:.9rem;color:var(--muted)">seconds</div></div>
      </div>

      <div class="controls" style="margin-top:1rem">
        <button id="contactBtn" class="btn">Contact</button>
        <button id="notifyBtn" class="btn">Notify when live</button>
        <button id="skipToChooser" class="btn primary">Proceed to theme chooser</button>
      </div>

      <div style="margin-top:.9rem;font-size:.92rem;color:var(--muted)">If you are the site owner and need immediate access, email <a href="mailto:skytechplc@protonmail.com" style="color:var(--gold)">skytechplc@protonmail.com</a></div>
    </div>
  </div>

  <!-- Theme chooser overlay -->
  <div id="chooserOverlay" class="overlay" role="dialog" aria-modal="true" aria-label="Choose theme" style="opacity:0;visibility:hidden">
    <div class="chooser" role="document">
      <div class="intro">
        <div class="title">Choose your VinceVision experience</div>
        <div class="subtitle">Select Futuristic for neon, particles, AI vibes; choose Cinematic for dramatic lighting and film-grade transitions. You can change this later.</div>
        <div style="margin-top:.6rem;display:flex;gap:.6rem">
          <button id="skipChoice" class="btn">Skip, use default</button>
          <button id="toggleMuteSmall" class="btn audio-toggle" title="Toggle audio">ðŸ”ˆ muted</button>
        </div>
        <div style="flex:1"></div>
        <div style="display:flex;gap:.6rem;align-items:center">
          <small style="color:var(--muted)">Tip:</small>
          <small style="color:var(--muted)">press 1 for Futuristic, 2 for Cinematic</small>
        </div>
      </div>

      <div class="modes" aria-hidden="false">
        <div id="modeFut" class="mode-card" tabindex="0" role="button" aria-pressed="false" aria-label="Futuristic mode">
          <div class="mode-head"><i class="fas fa-rocket" style="color:var(--accent-fut)"></i><span>Futuristic Mode</span></div>
          <div class="mode-desc">Blue neon, glass panels, particles, subtle AI motion.</div>
          <div class="mode-preview">
            <canvas id="previewFut" width="400" height="96" aria-hidden="true"></canvas>
          </div>
          <div class="mode-cta">
            <div style="color:var(--muted);font-size:.92rem">Ambient: synth hum</div>
            <div><button class="btn primary" data-theme="futuristic">Choose Futuristic</button></div>
          </div>
        </div>

        <div id="modeCine" class="mode-card" tabindex="0" role="button" aria-pressed="false" aria-label="Cinematic mode">
          <div class="mode-head"><i class="fas fa-film" style="color:var(--accent-cine)"></i><span>Cinematic Mode</span></div>
          <div class="mode-desc">Dark tones, light streaks, cinematic whoosh and depth.</div>
          <div class="mode-preview">
            <svg width="100%" height="96" viewBox="0 0 400 96" preserveAspectRatio="none" aria-hidden="true">
              <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ff4d6d" stop-opacity="0.12"/><stop offset="1" stop-color="#ffb3c3" stop-opacity="0.02"/></linearGradient></defs>
              <rect x="0" y="0" width="400" height="96" fill="url(#g1)"></rect>
            </svg>
          </div>
          <div class="mode-cta">
            <div style="color:var(--muted);font-size:.92rem">Ambient: cinematic whoosh</div>
            <div><button class="btn primary" data-theme="cinematic">Choose Cinematic</button></div>
          </div>
        </div>
      </div>

      <div style="grid-column:1/-1;text-align:center;color:var(--muted);font-size:.9rem;margin-top:.45rem">Your choice is stored locally, change anytime via the theme button</div>
    </div>
  </div>

  <!-- Particles canvas and cinematic streaks -->
  <canvas id="particles" aria-hidden="true" style="display:none"></canvas>
  <div id="streaks" class="streak-wrap" aria-hidden="true" style="display:none"></div>

  <!-- Header -->
  <header>
    <div class="logo"><i class="fas fa-check-circle"></i>VinceVision</div>
    <nav aria-label="Main navigation">
      <a href="#home">Home</a>
      <a href="#services">Services</a>
      <a href="#ceo">About CEO</a>
      <a href="#contact">Contact</a>
    </nav>
    <div class="header-right">
      <div style="position:relative"><input id="search" type="text" placeholder="Search services..." aria-label="Search services" style="padding:.45rem .75rem;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit"></div>
      <div id="local-time" aria-live="polite">--</div>
      <button id="themeButton" class="btn" title="Change theme">Theme</button>
      <button id="audioToggle" class="audio-toggle" title="Unmute audio">ðŸ”ˆ muted</button>
    </div>
  </header>

  <main>
    <!-- Hero, with original video kept -->
    <section id="home" class="section" tabindex="-1" aria-label="Home hero">
      <div class="hero">
        <div class="hero-left">
          <h1>VinceVision</h1>
          <p>Premium Tech Solutions that help businesses scale, automate, and win. We build websites, mobile apps, custom software, and offer trading courses.</p>
          <div style="margin-top:1rem;display:flex;gap:.75rem">
            <a class="btn primary" href="#services">Our Services</a>
            <a class="btn" href="#contact">Contact Us</a>
          </div>
        </div>

        <div class="hero-right">
          <div class="glass-card" style="width:380px;text-align:left">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem">
              <div style="font-weight:700">Live status</div>
              <div id="status-pill" style="font-size:.85rem;padding:.3rem .6rem;border-radius:999px;background:rgba(255,255,255,0.02)">Online</div>
            </div>
            <div style="color:var(--muted);font-size:.95rem">Next maintenance: 03:00 AM, Oct 25, 2025</div>
            <div style="margin-top:.85rem" id="mini-countdown"></div>
          </div>
        </div>

        <!-- original video background, kept -->
        <div class="hero-video" aria-hidden="true">
          <video autoplay loop muted playsinline>
            <source src="https://assets.mixkit.co/videos/preview/mixkit-digital-animation-of-streams-of-blue-light-1484-large.mp4" type="video/mp4">
            <!-- fallback -->
          </video>
        </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="section services-wrap" aria-label="Services">
      <h2>Services</h2>
      <p style="color:var(--muted)">We offer end-to-end tech solutions for modern businesses.</p>
      <div class="services-grid" id="servicesGrid" aria-live="polite"></div>
    </section>

    <!-- CEO -->
    <section id="ceo" class="section" style="padding:2rem 5%" aria-label="CEO">
      <div style="max-width:900px;margin:0 auto;text-align:center">
        <div style="width:140px;height:140px;margin:0 auto 1rem;border-radius:50%;overflow:hidden">
          <img src="https://media.licdn.com/dms/image/v2/D4D03AQHHmfgCXp7OsA/profile-displayphoto-shrink_200_200/profile-displayphoto-shrink_200_200/0/1636396692080?e=2147483647&v=beta&t=1XGE4UH7oU78czs3dQHFHn26hAxjuffcfYuguLy0H0I" alt="Vincent Omondi">
        </div>
        <h2>Mr. Vincent Omondi</h2>
        <p style="color:var(--muted)">CEO & Founder, full-stack engineer, founder of VinceVision.</p>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="section" style="padding:2rem 5%;text-align:center" aria-label="Contact">
      <h2>Contact</h2>
      <p style="color:var(--muted)">+254 742 850 266, skytechplc@protonmail.com</p>
    </section>

    <footer>
      &copy; <span id="year"></span> VinceVision. All rights reserved.
    </footer>
  </main>

  <!-- Ambient audio, muted by default -->
  <audio id="audioFut" loop preload="auto" src="https://example.com/futuristic-ambient.mp3" crossorigin="anonymous"></audio>
  <audio id="audioCine" loop preload="auto" src="https://example.com/cinematic-ambient.mp3" crossorigin="anonymous"></audio>

<script>
/* -------------------------
   Utilities and DOM helpers
   ------------------------- */
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));
const pad = n => String(n).padStart(2,'0');

/* -------------------------
   Config: maintenance target
   2025-10-25 03:00:00 Africa/Nairobi (UTC+3)
   ------------------------- */
const targetISO = '2025-10-25T03:00:00+03:00';
const targetDate = new Date(targetISO);

/* Elements */
const maintenanceOverlay = $('#maintenanceOverlay');
const mdays = $('#mdays'), mhours = $('#mhours'), mmins = $('#mmins'), msecs = $('#msecs');
const skipToChooserBtn = $('#skipToChooser');
const notifyBtn = $('#notifyBtn');
const contactBtn = $('#contactBtn');

const chooserOverlay = $('#chooserOverlay');
const chooseBtns = Array.from($$('.mode-card .btn.primary'));
const chooserCards = $$('.mode-card');
const skipChoice = $('#skipChoice');
const miniCount = $('#mini-countdown');
const servicesGrid = $('#servicesGrid');

const audioFut = $('#audioFut');
const audioCine = $('#audioCine');
const audioToggle = $('#audioToggle');
const audioToggleSmall = $('#toggleMuteSmall');
const themeButton = $('#themeButton');
const themeBtnHeader = $('#themeButton');
const localTimeEl = $('#local-time');

/* Initial state */
let isAudioMuted = true;
let particleRAF;
let streakInterval;

/* -------------------------
   Maintenance countdown functions
   ------------------------- */
function updateMaintenance(){
  const now = new Date();
  let diff = targetDate - now;
  if(diff <= 0){
    // hide overlay, show chooser
    hideMaintenance();
    return true;
  }
  const s = Math.floor(diff/1000);
  const days = Math.floor(s/(24*3600));
  const hours = Math.floor((s%(24*3600))/3600);
  const minutes = Math.floor((s%3600)/60);
  const seconds = s%60;
  mdays.textContent = days;
  mhours.textContent = pad(hours);
  mmins.textContent = pad(minutes);
  msecs.textContent = pad(seconds);
  return false;
}

function showMaintenance(){
  maintenanceOverlay.style.display = 'flex';
  maintenanceOverlay.style.opacity = '1';
  maintenanceOverlay.style.visibility = 'visible';
}

function hideMaintenance(){
  maintenanceOverlay.style.opacity = '0';
  maintenanceOverlay.style.visibility = 'hidden';
  maintenanceOverlay.style.display = 'none';
  // after maintenance hide, show chooser or apply theme
  showChooserOrTheme();
}

/* -------------------------
   Chooser logic
   ------------------------- */
function showChooserOrTheme(){
  const saved = localStorage.getItem('vv-theme');
  if(saved){
    applyTheme(saved);
    return;
  }
  // show chooser
  chooserOverlay.style.opacity = '1';
  chooserOverlay.style.visibility = 'visible';
  chooserOverlay.setAttribute('aria-hidden','false');
}

/* keyboard access */
document.addEventListener('keydown', (e)=>{
  if(chooserOverlay.style.visibility !== 'hidden'){
    if(e.key === '1') selectTheme('futuristic');
    if(e.key === '2') selectTheme('cinematic');
  }
});

/* choose button handlers */
chooseBtns.forEach(btn=>{
  btn.addEventListener('click', (ev)=>{
    const theme = ev.currentTarget.dataset.theme;
    selectTheme(theme);
  });
});

/* clickable cards */
chooserCards.forEach(card=>{
  card.addEventListener('click', ()=>{ const btn = card.querySelector('.btn.primary'); if(btn) selectTheme(btn.dataset.theme); });
});

/* skip choices */
skipChoice.addEventListener('click', ()=>{
  chooserOverlay.classList.add('hidden');
  // default to futuristic visually
  applyTheme('futuristic');
});

/* skip maintenance to chooser */
skipToChooserBtn.addEventListener('click', ()=>{
  hideMaintenance();
});

/* contact and notify */
contactBtn.addEventListener('click', ()=>{ location.href = 'mailto:skytechplc@protonmail.com?subject=VinceVision%20Maintenance%20Access'; });
notifyBtn.addEventListener('click', ()=>{ alert('Notification saved, we will notify visitors when site is live.'); });

/* select theme */
function selectTheme(theme){
  if(!theme) return;
  localStorage.setItem('vv-theme', theme);
  chooserOverlay.classList.add('hidden');
  applyTheme(theme);
}

/* -------------------------
   Theme application
   ------------------------- */
const themeAppliers = {
  futuristic(){
    document.body.classList.remove('theme-cinematic');
    document.body.classList.add('theme-futuristic');
    // visuals
    $('#particles').style.display = 'block';
    $('#streaks').style.display = 'none';
    startParticles();
    stopStreaks();
    // audio
    resumeAudio('fut');
  },
  cinematic(){
    document.body.classList.remove('theme-futuristic');
    document.body.classList.add('theme-cinematic');
    $('#particles').style.display = 'none';
    $('#streaks').style.display = 'block';
    stopParticles();
    startStreaks();
    resumeAudio('cine');
  }
};

function applyTheme(theme){
  // stop all visual loops
  stopParticles();
  stopStreaks();
  // apply
  if(theme === 'futuristic') themeAppliers.futuristic();
  else themeAppliers.cinematic();
}

/* -------------------------
   Audio control
   ------------------------- */
function resumeAudio(which){
  // audio muted by default, only play if unmuted
  audioFut.pause(); audioCine.pause();
  audioFut.currentTime = 0; audioCine.currentTime = 0;
  if(isAudioMuted) return;
  if(which === 'fut'){ audioFut.play().catch(()=>{}); }
  if(which === 'cine'){ audioCine.play().catch(()=>{}); }
}

function toggleAudio(){
  isAudioMuted = !isAudioMuted;
  localStorage.setItem('vv-audio-muted', isAudioMuted ? '1' : '0');
  audioToggle.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
  audioToggleSmall.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
  // apply current theme audio
  const theme = localStorage.getItem('vv-theme') || 'futuristic';
  if(isAudioMuted){
    audioFut.pause(); audioCine.pause();
  } else {
    if(theme === 'futuristic') audioFut.play().catch(()=>{});
    else audioCine.play().catch(()=>{});
  }
}

/* attach audio toggle */
audioToggle.addEventListener('click', toggleAudio);
audioToggleSmall.addEventListener('click', toggleAudio);

/* restore audio preference */
(function restoreAudioPref(){
  const pref = localStorage.getItem('vv-audio-muted');
  if(pref === '0') isAudioMuted = false;
  else isAudioMuted = true;
  audioToggle.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
  audioToggleSmall.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
})();

/* header theme button to change theme later */
themeBtnHeader.addEventListener('click', ()=>{
  // show chooser again
  chooserOverlay.style.opacity = '1';
  chooserOverlay.style.visibility = 'visible';
});

/* -------------------------
   Services render
   ------------------------- */
const services = [
  {title:'Website Design', desc:'Modern, responsive websites tailored to your brand.'},
  {title:'Logo Design', desc:'Brand identity and professional logos.'},
  {title:'Mobile Apps', desc:'iOS and Android app development.'},
  {title:'Graphic Design', desc:'Posters, banners, social assets.'},
  {title:'Digital Marketing', desc:'SEO, ads, and social growth.'},
  {title:'Custom Software', desc:'Bespoke software systems.'},
  {title:'IT Consulting', desc:'Strategic technology consulting.'},
  {title:'Cybersecurity', desc:'Security audits and protection.'},
  {title:'Cloud Computing', desc:'AWS, Azure, GCP solutions.'},
  {title:'Video Editing', desc:'Creative content and post production.'},
  {title:'Forex Trading & Courses', desc:'Trading strategies and coaching.'}
];

function renderServices(){
  servicesGrid.innerHTML = '';
  services.forEach(s=>{
    const div = document.createElement('div');
    div.className = 'service-card';
    div.innerHTML = `<h2>${s.title}</h2><p>${s.desc}</p>`;
    servicesGrid.appendChild(div);
  });
}

/* -------------------------
   Mini countdown in hero
   ------------------------- */
function updateMini(){
  const now = new Date();
  const diff = targetDate - now;
  if(diff <= 0){ miniCount.textContent = 'We are live'; return; }
  const s = Math.floor(diff/1000);
  const days = Math.floor(s/(24*3600));
  const hrs = Math.floor((s%(24*3600))/3600);
  const mins = Math.floor((s%3600)/60);
  miniCount.textContent = `Back in: ${days}d ${pad(hrs)}h ${pad(mins)}m`;
}

/* -------------------------
   PARTICLES system for Futuristic mode
   lightweight, CPU conscious
   ------------------------- */
let particlesCanvas, pCtx, particleList = [], particleLoop;
function startParticles(){
  particlesCanvas = $('#particles');
  particlesCanvas.style.display = 'block';
  pCtx = particlesCanvas.getContext('2d');
  function resize(){
    particlesCanvas.width = innerWidth;
    particlesCanvas.height = innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);
  particleList = [];
  const count = Math.max(40, Math.floor((innerWidth*innerHeight)/120000));
  for(let i=0;i<count;i++){
    particleList.push({
      x: Math.random()*particlesCanvas.width,
      y: Math.random()*particlesCanvas.height,
      r: 0.6 + Math.random()*1.8,
      vx: (Math.random()-0.5)*0.4,
      vy: (Math.random()-0.5)*0.4,
      a: 0.08 + Math.random()*0.22
    });
  }
  cancelAnimationFrame(particleLoop);
  function frame(){
    pCtx.clearRect(0,0,particlesCanvas.width,particlesCanvas.height);
    // subtle background overlay
    const g = pCtx.createLinearGradient(0,0,particlesCanvas.width,particlesCanvas.height);
    g.addColorStop(0, 'rgba(2,6,20,0.12)');
    g.addColorStop(1, 'rgba(5,27,51,0.06)');
    pCtx.fillStyle = g; pCtx.fillRect(0,0,particlesCanvas.width,particlesCanvas.height);
    // draw particles
    for(let p of particleList){
      p.x += p.vx; p.y += p.vy;
      if(p.x < -10) p.x = particlesCanvas.width + 10;
      if(p.x > particlesCanvas.width+10) p.x = -10;
      if(p.y < -10) p.y = particlesCanvas.height + 10;
      if(p.y > particlesCanvas.height+10) p.y = -10;
      pCtx.beginPath();
      pCtx.fillStyle = `rgba(33,182,255,${p.a})`;
      pCtx.arc(p.x,p.y,p.r,0,Math.PI*2); pCtx.fill();
    }
    // subtle interconnect lines for nearby points, limited checks
    for(let i=0;i<particleList.length;i++){
      const a = particleList[i];
      for(let j=i+1;j<particleList.length;j++){
        const b = particleList[j];
        const dx = a.x - b.x, dy = a.y - b.y;
        const d = Math.sqrt(dx*dx+dy*dy);
        if(d < 100){
          pCtx.beginPath();
          pCtx.strokeStyle = `rgba(33,182,255,${0.008*(100-d)})`;
          pCtx.lineWidth = 1;
          pCtx.moveTo(a.x,a.y); pCtx.lineTo(b.x,b.y); pCtx.stroke();
        }
      }
    }
    particleLoop = requestAnimationFrame(frame);
  }
  frame();
}

function stopParticles(){
  if(particleLoop) cancelAnimationFrame(particleLoop);
  if(particlesCanvas) particlesCanvas.style.display = 'none';
}

/* -------------------------
   Cinematic streaks
   ------------------------- */
function startStreaks(){
  const st = $('#streaks');
  st.style.display = 'block';
  st.innerHTML = '';
  for(let i=0;i<8;i++){
    const el = document.createElement('div');
    el.style.position = 'absolute';
    el.style.left = `${-20 + Math.random()*140}%`;
    el.style.top = `${Math.random()*100}%`;
    el.style.width = `${10 + Math.random()*80}px`;
    el.style.height = `${1 + Math.random()*4}px`;
    el.style.background = `linear-gradient(90deg, rgba(255,255,255,0), rgba(255,77,109,0.36), rgba(255,255,255,0))`;
    el.style.transform = `rotate(${(-30 + Math.random()*60)}deg)`;
    el.style.opacity = '0';
    el.style.filter = 'blur(6px) saturate(120%)';
    st.appendChild(el);
  }
  streakInterval = setInterval(()=>{
    const kids = Array.from(st.children);
    const k = kids[Math.floor(Math.random()*kids.length)];
    if(!k) return;
    k.style.transition = 'transform 1.1s cubic-bezier(.2,.9,.3,1), opacity 1.1s';
    k.style.opacity = '0.9';
    k.style.transform = `translateX(${150 + Math.random()*200}px) rotate(${(-30 + Math.random()*60)}deg)`;
    setTimeout(()=>{ k.style.opacity = '0'; k.style.transform = `translateX(-40px) rotate(${(-30 + Math.random()*60)}deg)`; }, 1100);
  }, 700);
}

function stopStreaks(){
  const st = $('#streaks');
  if(streakInterval) clearInterval(streakInterval);
  st.style.display = 'none';
  st.innerHTML = '';
}

/* -------------------------
   Preview canvas animation for chooser
   ------------------------- */
(function drawPreview(){
  const c = document.getElementById('previewFut');
  if(!c) return;
  const ctx = c.getContext('2d');
  function r(){
    ctx.clearRect(0,0,c.width,c.height);
    const g = ctx.createLinearGradient(0,0,c.width,0);
    g.addColorStop(0,'rgba(2,6,20,0.6)'); g.addColorStop(1,'rgba(3,20,40,0.2)');
    ctx.fillStyle = g; ctx.fillRect(0,0,c.width,c.height);
    for(let i=0;i<12;i++){
      ctx.beginPath();
      const x = (i/12)*c.width + Math.sin(Date.now()/1200 + i)*6;
      const y = c.height/2 + Math.cos(Date.now()/900 + i)*8;
      const r = 2 + (i%3);
      ctx.fillStyle = `rgba(33,182,255,${0.08 + (i%4)*0.02})`;
      ctx.arc(x,y,r,0,Math.PI*2); ctx.fill();
    }
    requestAnimationFrame(r);
  }
  r();
})();

/* -------------------------
   Small UI wiring
   ------------------------- */
$('#year').textContent = new Date().getFullYear();
renderServices();

/* local time */
function updateLocalTime(){
  localTimeEl.textContent = new Date().toLocaleString('en-US', {timeZone: Intl.DateTimeFormat().resolvedOptions().timeZone});
}
updateLocalTime(); setInterval(updateLocalTime,1000);

/* mini countdown */
updateMini(); setInterval(updateMini,15000);

/* maintenance flow init */
(function initFlow(){
  const now = new Date();
  if(now < targetDate){
    // show maintenance overlay and countdown
    showMaintenance();
    updateMaintenance();
    const interval = setInterval(()=>{
      const finished = updateMaintenance();
      if(finished){
        clearInterval(interval);
      }
    }, 1000);
  } else {
    // time passed, show chooser or apply saved theme
    const saved = localStorage.getItem('vv-theme');
    if(saved){
      applyTheme(saved);
    } else {
      chooserOverlay.style.opacity = '1';
      chooserOverlay.style.visibility = 'visible';
    }
  }
})();

/* hide chooser on load if saved */
window.addEventListener('load', ()=>{
  const saved = localStorage.getItem('vv-theme');
  if(saved && new Date() >= targetDate){
    chooserOverlay.classList.add('hidden');
    applyTheme(saved);
  }
  // resume audio on first user gesture
  document.addEventListener('click', function resumeOnce(){
    const t = localStorage.getItem('vv-theme') || 'futuristic';
    if(!isAudioMuted){
      if(t === 'futuristic') audioFut.play().catch(()=>{});
      else audioCine.play().catch(()=>{});
    }
    document.removeEventListener('click', resumeOnce);
  });
});

/* Accessibility: Escape hides chooser */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape'){
    if(chooserOverlay && chooserOverlay.style.visibility !== 'hidden'){
      chooserOverlay.style.opacity = 0;
      chooserOverlay.style.visibility = 'hidden';
    }
  }
});

/* -------------------------
   Stop visual loops before switching themes
   ------------------------- */
function stopVisuals(){
  stopParticles();
  stopStreaks();
}
const origApplyTheme = applyTheme;
applyTheme = function(theme){
  stopVisuals();
  origApplyTheme(theme);
};

/* -------------------------
   Expose audio toggle in header
   ------------------------- */
audioToggle.addEventListener('click', ()=>{ toggleAudio(); });
function toggleAudio(){
  isAudioMuted = !isAudioMuted;
  localStorage.setItem('vv-audio-muted', isAudioMuted ? '1' : '0');
  audioToggle.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
  audioToggleSmall.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
  // play/pause according to the current theme
  const current = localStorage.getItem('vv-theme') || 'futuristic';
  if(isAudioMuted){
    audioFut.pause(); audioCine.pause();
  } else {
    if(current === 'futuristic'){ audioFut.play().catch(()=>{}); audioCine.pause(); }
    else { audioCine.play().catch(()=>{}); audioFut.pause(); }
  }
}

/* small helper to render services */
function renderServices(){
  servicesGrid.innerHTML = '';
  services.forEach(s=>{
    const div = document.createElement('div');
    div.className = 'service-card';
    div.innerHTML = `<h2>${s.title}</h2><p>${s.desc}</p>`;
    servicesGrid.appendChild(div);
  });
}

/* Initialize audio pref from storage */
(function audioPref(){
  const pref = localStorage.getItem('vv-audio-muted');
  if(pref === '0') isAudioMuted = false;
  else isAudioMuted = true;
  audioToggle.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
  audioToggleSmall.textContent = isAudioMuted ? 'ðŸ”ˆ muted' : 'ðŸ”Š unmuted';
})();

/* Small touch: animate sections into view when scrolled */
const sectionObserver = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      e.target.classList.add('in-view');
    }
  });
},{threshold:0.12});
$$('.section').forEach(s => sectionObserver.observe(s));

/* quick keyboard hints */
document.addEventListener('keydown', (e)=>{
  if(e.key === '1') selectTheme('futuristic');
  if(e.key === '2') selectTheme('cinematic');
});
</script>
</body>
</html>
