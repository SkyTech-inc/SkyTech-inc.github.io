<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VinceVision Kicks Launch Seat Booking</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            position: relative;
        }
        h1 {
            color: #333;
        }
        #timer {
            font-size: 24px;
            color: #ff0000;
            margin: 10px 0;
        }
        .seat-container {
            display: grid;
            grid-template-columns: repeat(10, 50px);
            gap: 5px;
            justify-content: center;
            margin: 20px auto;
            max-width: 600px;
        }
        .seat {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #fff;
            cursor: not-allowed;
            border: 1px solid #999;
            position: relative;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .seat-number {
            position: absolute;
            top: 0;
            right: 0;
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 2px;
            font-size: 10px;
        }
        .free {
            background-image: url('https://www.shutterstock.com/image-photo/black-empty-plastic-chairs-stand-260nw-2197772861.jpg');
            cursor: pointer;
        }
        .free:hover {
            opacity: 0.8;
        }
        .vip {
            background-image: url('https://sc04.alicdn.com/kf/Hd16632dd0727494f85edc5c9c06da8b5l.jpg');
            color: #000;
            cursor: not-allowed;
        }
        .booked {
            background-image: url('https://media.gettyimages.com/id/200127563-001/photo/red-theater-seats-with-reserved-signs.jpg?s=612x612&w=gi&k=20&c=5qkb9-rnw6VubxnFrFanOrUEn9u_eruYTL4QJl3fKV0=');
            filter: grayscale(100%);
        }
        #status {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }
        dialog {
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background: white;
            width: 300px;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        label {
            text-align: left;
        }
        input, select, textarea {
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
        #tom-jerry {
            position: absolute;
            bottom: 10px;
            left: 0;
            width: 200px;
            height: auto;
            animation: chase 20s linear infinite;
        }
        @keyframes chase {
            0% { left: -200px; }
            100% { left: 100%; }
        }
        #special-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: pink;
            z-index: 1000;
            text-align: center;
            padding: 50px;
        }
        #letter {
            background: white;
            padding: 20px;
            margin: 20px auto;
            width: 80%;
            animation: unfold 2s;
        }
        @keyframes unfold {
            0% { height: 0; overflow: hidden; }
            100% { height: auto; }
        }
        #heart {
            width: 100px;
            height: 100px;
            background: red;
            position: relative;
            margin: 20px auto;
            display: none;
        }
        #heart:before, #heart:after {
            content: "";
            position: absolute;
            top: 0;
            width: 52px;
            height: 80px;
            background: red;
            border-radius: 50px 50px 0 0;
            transform: rotate(-45deg);
            left: 25px;
        }
        #heart:after {
            left: -25px;
            transform: rotate(45deg);
        }
        .burn {
            animation: burn 2s forwards;
        }
        @keyframes burn {
            100% { background: black; transform: scale(0); }
        }
        .break {
            animation: break 1s forwards;
        }
        @keyframes break {
            100% { opacity: 0; transform: translateY(100px); }
        }
        .rose-petals {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .petal {
            position: absolute;
            background: red;
            width: 10px;
            height: 20px;
            border-radius: 50%;
            animation: fall 5s linear infinite;
        }
        @keyframes fall {
            0% { top: -20px; }
            100% { top: 100%; }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
    <h1>VinceVision Kicks Launch Seat Booking</h1>
    <p>Total Seats: 78 | Free Seats: <span id="free-count">77</span></p>
    <p>Bookings must be completed before October 20, 2025.</p>
    <div id="timer"></div>
    <div class="seat-container" id="seat-container"></div>
    <div id="status"></div>

    <dialog id="triviaModal">
        <h2>Trivia Quiz</h2>
        <form id="triviaForm">
            <label for="ceo">Who is the CEO?</label>
            <input type="text" id="ceo" required>

            <label for="iphone">What's the toughest slimmest iPhone?</label>
            <input type="text" id="iphone" required>

            <button type="submit">Submit Answers</button>
        </form>
    </dialog>

    <dialog id="bookingModal">
        <h2>Book Seat <span id="selected-seat"></span></h2>
        <form id="bookingForm">
            <label for="name">Name:</label>
            <input type="text" id="name" required>

            <label for="phone">Phone Number:</label>
            <input type="tel" id="phone" required>

            <label for="id">ID (National ID):</label>
            <input type="text" id="id" required>

            <label for="age">Age (must be at least 18):</label>
            <input type="number" id="age" min="18" required>

            <label for="phoneModel">Preferred Phone Model:</label>
            <select id="phoneModel" required>
                <option value="">Select...</option>
                <option value="iPhone 14 Pro 256GB">iPhone 14 Pro 256GB</option>
                <option value="iPhone 14 Pro Max 256GB">iPhone 14 Pro Max 256GB</option>
                <option value="iPhone 14 Plain 256GB">iPhone 14 Plain 256GB</option>
                <option value="Samsung S25 Ultra">Samsung S25 Ultra</option>
            </select>

            <label for="shoeSize">Shoe Size (for free shoes):</label>
            <input type="number" id="shoeSize" min="1" max="50" required>

            <label for="howKnow">How do you know VinceVision?</label>
            <textarea id="howKnow" required></textarea>

            <button type="submit">Submit</button>
        </form>
    </dialog>

    <div id="special-page">
        <iframe id="music" src="https://www.youtube.com/embed/Pvhpfoi7PEY?autoplay=1&loop=1" style="display:none;" allow="autoplay"></iframe>
        <img id="sharon-image" src="https://media.licdn.com/dms/image/v2/D4D03AQEU229gGJBWkw/profile-displayphoto-shrink_800_800/0/1692633316167?e=2147483647&v=beta&t=FaQPTeXs01bomKy3VbiRLEiOYapv3mL6DZP6NtRr3s0" alt="Sharon" style="max-width: 300px;">
        <div id="letter">
            <p>Dear Sharon,</p>
            <p>I, Vincent, love you so much. You are the light of my life, and I will always be there for you, through thick and thin. Your smile brightens my day, and your love fills my heart.</p>
            <p>Forever yours, Vincent</p>
        </div>
        <button id="love-yes">I love you too</button>
        <button id="love-no">I don't love you</button>
        <div id="teaser" style="display:none;">You are a bad girl for fun! Now only one button left: I love you</div>
        <div id="heart"></div>
        <div class="rose-petals" id="rose-petals"></div>
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYWZjOWQ5MjAwYzI3OTU1Y2IxMjFjNGE1ZjE2ZGY5Y2QxYTk5ZTc4OSZjdD1n/3o6Zt6KHxJTzyl4kjm/giphy.gif" alt="Cute cartoon" style="position: absolute; bottom: 10px; right: 10px; width: 200px;">
    </div>

    <img id="tom-jerry" src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/9e226751-a658-4943-92d0-43468dcbbbb8/dd1dgbi-ef570d5b-97a8-41b3-a562-768658e9d0b8.gif?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiIvZi85ZTIyNjc1MS1hNjU4LTQ5NDMtOTJkMC00MzQ2OGRjYmJiYjgvZGQxZGdiaS1lZjU3MGQ1Yi05N2E4LTQxYjMtYTU2Mi03Njg2NThlOWQwYjguZ2lmIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.ACixF6K-g0WJqs2BIwZQoXaorKFuSWbyw5kHs1Fj01M" alt="Tom and Jerry">

    <script>
        const totalSeats = 78;
        const vipSeat = 1;
        const whatsappNumber = '+254742850266';
        const deadline = new Date('2025-10-20T00:00:00');
        const container = document.getElementById('seat-container');
        const triviaModal = document.getElementById('triviaModal');
        const triviaForm = document.getElementById('triviaForm');
        const bookingModal = document.getElementById('bookingModal');
        const form = document.getElementById('bookingForm');
        const selectedSeatSpan = document.getElementById('selected-seat');
        const timerDiv = document.getElementById('timer');
        const freeCountSpan = document.getElementById('free-count');
        const statusDiv = document.getElementById('status');
        const specialPage = document.getElementById('special-page');
        const loveYes = document.getElementById('love-yes');
        const loveNo = document.getElementById('love-no');
        const teaser = document.getElementById('teaser');
        const heart = document.getElementById('heart');
        const rosePetals = document.getElementById('rose-petals');

        let bookedSeats = JSON.parse(localStorage.getItem('bookedSeats')) || {};
        let freeCount = totalSeats - 1 - Object.keys(bookedSeats).length;
        freeCountSpan.textContent = freeCount;
        let currentSeat = null;
        let quizInProgress = false;
        let userDetails = null;

        if (localStorage.getItem('blocked')) {
            document.body.innerHTML = '<h1>You are blocked because you exited during the quiz.</h1>';
        }

        function updateTimer() {
            const now = new Date('2025-10-17T00:00:00'); // Current date as per prompt
            const timeLeft = deadline - now;

            if (timeLeft <= 0) {
                timerDiv.textContent = 'Booking period has ended!';
                disableBookings();
                return;
            }

            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            timerDiv.textContent = `Time left: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        }

        function disableBookings() {
            document.querySelectorAll('.free').forEach(seat => {
                seat.classList.remove('free');
                seat.classList.add('booked');
                seat.removeEventListener('click', startTrivia);
            });
            statusDiv.textContent = 'Bookings are closed.';
        }

        function startTrivia() {
            currentSeat = this.dataset.seat;
            selectedSeatSpan.textContent = currentSeat;
            quizInProgress = true;
            localStorage.setItem('quizInProgress', 'true');
            window.onbeforeunload = () => 'You cannot exit during the quiz!';
            triviaModal.showModal();
        }

        function initSeats() {
            for (let i = 1; i <= totalSeats; i++) {
                const seat = document.createElement('div');
                seat.classList.add('seat');
                seat.dataset.seat = i;

                const seatNumber = document.createElement('div');
                seatNumber.classList.add('seat-number');
                seatNumber.textContent = i;
                seat.appendChild(seatNumber);

                if (i === vipSeat) {
                    seat.classList.add('vip');
                    seat.title = 'Reserved for CEO Mr. Vincent Omondi';
                } else if (!bookedSeats[i]) {
                    seat.classList.add('free');
                    seat.addEventListener('click', startTrivia);
                    seat.title = 'Available Seat';
                } else {
                    seat.classList.add('booked');
                    seat.title = `Booked by ${bookedSeats[i].name}`;
                }

                container.appendChild(seat);
            }
        }

        triviaForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const ceo = document.getElementById('ceo').value.trim().toLowerCase();
            const iphone = document.getElementById('iphone').value.trim().toLowerCase();

            if (ceo !== 'vincent' || iphone !== 'iphone 17 air') {
                alert('Incorrect answers. You cannot book.');
                triviaModal.close();
                quizInProgress = false;
                localStorage.removeItem('quizInProgress');
                window.onbeforeunload = null;
                return;
            }

            triviaModal.close();
            bookingModal.showModal();
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const idNum = document.getElementById('id').value.trim();
            const age = parseInt(document.getElementById('age').value);
            const phoneModel = document.getElementById('phoneModel').value;
            const shoeSize = document.getElementById('shoeSize').value;
            const howKnow = document.getElementById('howKnow').value.trim();

            if (age < 18) {
                alert('You must be at least 18 years old to book.');
                return;
            }

            if (phone === '0793022244' && parseInt(currentSeat) >= 5) {
                alert('Users with this phone number can only book seats 1-4 (except VIP).');
                return;
            }

            const info = `Seat: ${currentSeat}\nName: ${name}\nPhone: ${phone}\nID: ${idNum}\nAge: ${age}\nPhone Model: ${phoneModel}\nShoe Size: ${shoeSize}\nHow know VinceVision: ${howKnow}`;

            if (confirm(`Confirm booking:\n${info}`)) {
                bookedSeats[currentSeat] = { name, phone, idNum, age, phoneModel, shoeSize, howKnow };
                localStorage.setItem('bookedSeats', JSON.stringify(bookedSeats));

                const seatElem = document.querySelector(`.seat[data-seat="${currentSeat}"]`);
                seatElem.classList.remove('free');
                seatElem.classList.add('booked');
                seatElem.removeEventListener('click', startTrivia);
                seatElem.title = `Booked by ${name}`;

                freeCount--;
                freeCountSpan.textContent = freeCount;
                statusDiv.textContent = `Seat ${currentSeat} booked by ${name}!`;

                quizInProgress = false;
                localStorage.removeItem('quizInProgress');
                window.onbeforeunload = null;

                // Confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });

                const isSpecial = name.toLowerCase() === 'sharon wacheke';
                if (isSpecial) {
                    specialPage.style.display = 'block';
                    userDetails = { currentSeat, name, phone, idNum, age, phoneModel, shoeSize, howKnow };
                    createRosePetals();
                } else {
                    redirectToWhatsApp(info);
                }
            }

            bookingModal.close();
            form.reset();
        });

        function redirectToWhatsApp(info) {
            const message = encodeURIComponent(`I have booked seat ${currentSeat}. Details:\n${info}`);
            window.location.href = `https://wa.me/${whatsappNumber}?text=${message}`;
        }

        function createRosePetals() {
            for (let i = 0; i < 50; i++) {
                const petal = document.createElement('div');
                petal.classList.add('petal');
                petal.style.left = `${Math.random() * 100}%`;
                petal.style.animationDelay = `${Math.random() * 5}s`;
                rosePetals.appendChild(petal);
            }
        }

        loveYes.addEventListener('click', () => {
            confetti({
                particleCount: 200,
                spread: 100,
                colors: ['#ff0000', '#ff69b4']
            });
            // Cute lovers animation - using confetti as placeholder
            setTimeout(() => {
                if (userDetails) {
                    const info = `Seat: ${userDetails.currentSeat}\nName: ${userDetails.name}\nPhone: ${userDetails.phone}\nID: ${userDetails.idNum}\nAge: ${userDetails.age}\nPhone Model: ${userDetails.phoneModel}\nShoe Size: ${userDetails.shoeSize}\nHow know VinceVision: ${userDetails.howKnow}`;
                    redirectToWhatsApp(info);
                }
            }, 2000);
        });

        loveNo.addEventListener('click', () => {
            heart.style.display = 'block';
            heart.classList.add('burn', 'break');
            setTimeout(() => {
                document.body.style.background = 'black';
                setTimeout(() => {
                    document.body.style.background = 'pink';
                    teaser.style.display = 'block';
                    loveNo.style.display = 'none';
                }, 3000);
            }, 1000);
        });

        updateTimer();
        setInterval(updateTimer, 1000);

        const now = new Date('2025-10-17T00:00:00');
        if (now >= deadline) {
            disableBookings();
        } else {
            initSeats();
        }

        if (localStorage.getItem('quizInProgress') === 'true') {
            localStorage.setItem('blocked', 'true');
            localStorage.removeItem('quizInProgress');
            location.reload();
        }

        statusDiv.textContent = `Only ${freeCount} seats left!`;
    </script>
</body>
</html>
